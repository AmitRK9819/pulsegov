<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PulseGov - AI-Powered Civic Governance</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .btn-primary {
            background: linear-gradient(to right, #0ea5e9, #0284c7);
            transition: all 0.3s;
        }

        .btn-primary:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px -10px rgba(14, 165, 233, 0.5);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>

<body class="text-white">
    <div id="app" class="container mx-auto p-8">
        <!-- Landing Page -->
        <div id="landing" class="min-h-screen flex items-center justify-center">
            <div class="max-w-4xl w-full text-center fade-in">
                <div class="inline-block mb-6">
                    <div
                        class="w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center shadow-2xl shadow-blue-500/50">
                        <svg class="w-12 h-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                </div>

                <h1
                    class="text-6xl font-bold mb-4 bg-gradient-to-r from-white via-blue-200 to-white bg-clip-text text-transparent">
                    PulseGov
                </h1>
                <p class="text-2xl text-white/60 mb-4">AI-Powered Civic Governance</p>
                <p class="text-lg text-white/40 mb-2 max-w-2xl mx-auto">
                    Resolution Intelligence ‚Ä¢ Predictive Analytics ‚Ä¢ Smart Routing
                </p>
                <p class="text-sm text-yellow-400/80 mb-12">‚ö° Standalone Demo - No Installation Required</p>

                <div class="grid md:grid-cols-2 gap-6 mb-12">
                    <div onclick="showPage('citizen')"
                        class="glass-card p-8 hover:scale-105 transition-transform cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center mb-4 group-hover:shadow-2xl group-hover:shadow-blue-500/50 transition-all mx-auto">
                            <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">Citizen Portal</h3>
                        <p class="text-white/60 mb-2">Submit and track complaints</p>
                        <div class="text-blue-400 text-sm font-semibold">Start Here ‚Üí</div>
                    </div>

                    <div onclick="showPage('officer')"
                        class="glass-card p-8 hover:scale-105 transition-transform cursor-pointer group">
                        <div
                            class="w-16 h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center mb-4 group-hover:shadow-2xl group-hover:shadow-green-500/50 transition-all mx-auto">
                            <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                            </svg>
                        </div>
                        <h3 class="text-2xl font-bold mb-2">Officer Dashboard</h3>
                        <p class="text-white/60 mb-2">üåü AI-powered resolution hub</p>
                        <div class="text-green-400 text-sm font-semibold">View AI Suggestions ‚Üí</div>
                    </div>
                </div>

                <div class="grid md:grid-cols-4 gap-4 text-center text-sm">
                    <div class="glass-card p-4">
                        <div class="text-3xl mb-2">ü§ñ</div>
                        <p class="font-bold mb-1">AI Classification</p>
                        <p class="text-white/60 text-xs">Auto-categorize with 95% accuracy</p>
                    </div>
                    <div class="glass-card p-4">
                        <div class="text-3xl mb-2">‚ö°</div>
                        <p class="font-bold mb-1">Smart Routing</p>
                        <p class="text-white/60 text-xs">Best officer assignment</p>
                    </div>
                    <div class="glass-card p-4">
                        <div class="text-3xl mb-2">üéØ</div>
                        <p class="font-bold mb-1">Predictive SLA</p>
                        <p class="text-white/60 text-xs">Forecast breaches early</p>
                    </div>
                    <div class="glass-card p-4">
                        <div class="text-3xl mb-2">üí°</div>
                        <p class="font-bold mb-1">Graph Intelligence</p>
                        <p class="text-white/60 text-xs">Learn from history</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Citizen Portal -->
        <div id="citizen" class="hidden">
            <div class="max-w-6xl mx-auto fade-in">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h1 class="text-4xl font-bold mb-2">Citizen Portal</h1>
                        <p class="text-white/60">Track your civic grievances</p>
                    </div>
                    <button onclick="showPage('landing')"
                        class="glass-card px-4 py-2 hover:bg-white/10 transition-all">‚Üê Back</button>
                </div>

                <button onclick="toggleForm()" id="newBtn" class="btn-primary px-6 py-3 rounded-xl font-semibold mb-6">+
                    New Complaint</button>

                <div id="complaintForm" class="glass-card p-8 mb-8 hidden">
                    <h2 class="text-2xl font-bold mb-6">Submit New Complaint</h2>
                    <form onsubmit="submitComplaint(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Title *</label>
                            <input type="text" id="title" required
                                class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                placeholder="e.g., Streetlight not working on MG Road">
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Description *</label>
                            <textarea id="description" required rows="4"
                                class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                placeholder="Please provide detailed information..."></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Location</label>
                            <input type="text" id="location"
                                class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
                                placeholder="Address or landmark">
                        </div>
                        <button type="submit" class="btn-primary w-full px-6 py-3 rounded-xl font-semibold">Submit
                            Complaint</button>
                    </form>
                </div>

                <div id="complaintsList"></div>
            </div>
        </div>

        <!-- Officer Dashboard -->
        <div id="officer" class="hidden">
            <div class="max-w-7xl mx-auto fade-in">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h1 class="text-4xl font-bold mb-2">Officer Dashboard</h1>
                        <p class="text-white/60">ü§ñ AI-powered resolution intelligence at your fingertips</p>
                    </div>
                    <button onclick="showPage('landing')"
                        class="glass-card px-4 py-2 hover:bg-white/10 transition-all">‚Üê Back</button>
                </div>

                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-1">
                        <div class="glass-card p-6">
                            <h2 class="text-xl font-bold mb-4">Assigned Complaints (<span id="complaintCount">0</span>)
                            </h2>
                            <div id="officerComplaints" class="space-y-3 max-h-[600px] overflow-y-auto"></div>
                        </div>
                    </div>

                    <div class="lg:col-span-2">
                        <div id="complaintDetails"
                            class="glass-card p-12 text-center h-full flex items-center justify-center">
                            <div>
                                <div class="text-6xl mb-4">üëà</div>
                                <p class="text-white/60 text-lg">Select a complaint to view AI-powered resolution
                                    suggestions</p>
                                <p class="text-white/40 text-sm mt-2">The killer feature that makes PulseGov unique!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock Data
        let complaints = [
            {
                id: 1,
                complaint_id: 'CMP-1738345200-DEMO0001',
                citizen_id: 1,
                title: 'Streetlight not working at MG Road',
                description: 'The streetlight near City Mall has been out for 3 days, making the area very dark and unsafe at night. Multiple residents have complained.',
                category: 'Streetlight Not Working',
                department: 'Electricity Department',
                officer: 'Rajesh Kumar',
                status: 'assigned',
                created_at: new Date().toISOString(),
            },
            {
                id: 2,
                complaint_id: 'CMP-1738345100-DEMO0002',
                citizen_id: 1,
                title: 'Large pothole on Main Street causing accidents',
                description: 'Deep pothole near the market is causing vehicle damage and safety issues. Immediate repair needed.',
                category: 'Pothole on Road',
                department: 'Roads & Infrastructure',
                officer: 'Amit Patel',
                status: 'assigned',
                created_at: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),
            }
        ];

        const mockSuggestions = {
            1: {
                similar_complaints: [
                    {
                        id: 'CMP-OLD-001',
                        title: 'Street light broken at Park Avenue',
                        description: 'Light pole damaged',
                        resolution: 'Inspected fixture, found faulty LED bulb. Replaced with new 15W LED bulb. Tested operation - working perfectly. Documented with photos.',
                        time: 18,
                        similarity: 87,
                        rating: 5
                    },
                    {
                        id: 'CMP-OLD-002',
                        title: 'Streetlight not illuminating near school',
                        description: 'Complete darkness affecting safety',
                        resolution: 'Checked power supply. Found loose connection at junction box. Tightened connections and replaced damaged wire section.',
                        time: 24,
                        similarity: 82,
                        rating: 4
                    },
                    {
                        id: 'CMP-OLD-003',
                        title: 'Multiple streetlights out on residential street',
                        description: 'Entire area dark',
                        resolution: 'Contacted electricity board. Main supply issue from transformer. Board resolved supply problem within 20 hours.',
                        time: 20,
                        similarity: 75,
                        rating: 5
                    }
                ],
                actions: [
                    'Inspect the streetlight fixture for visible damage or broken components',
                    'Test power supply to the lamp post using voltage meter',
                    'Check if bulb/LED needs replacement (most common issue)',
                    'Examine wiring connections for loose or corroded contacts',
                    'If above steps fail, contact electricity board for supply check',
                    'Document resolution with before/after photos',
                    'Follow up within 24 hours to ensure continued operation'
                ],
                time: 18,
                success: 87,
                cases: 3
            },
            2: {
                similar_complaints: [
                    {
                        id: 'CMP-OLD-004',
                        title: 'Deep pothole causing vehicle damage',
                        description: 'Dangerous road condition',
                        resolution: 'Placed warning cones. Filled with hot mix asphalt. Compacted using roller. Surface smoothed and leveled. Cured for 2 hours before reopening.',
                        time: 36,
                        similarity: 91,
                        rating: 5
                    },
                    {
                        id: 'CMP-OLD-005',
                        title: 'Road damage near commercial area',
                        description: 'Multiple potholes affecting traffic',
                        resolution: 'Used cold mix for temporary fix within 8 hours. Scheduled permanent hot mix repair for following week.',
                        time: 48,
                        similarity: 85,
                        rating: 4
                    }
                ],
                actions: [
                    'Assess pothole dimensions (depth and diameter)',
                    'Place warning cones/signs around damaged area immediately',
                    'Arrange asphalt repair materials (hot mix preferred)',
                    'Clean pothole area of debris and loose material',
                    'Fill pothole with asphalt mix in layers',
                    'Compact each layer using appropriate equipment',
                    'Level surface flush with existing road',
                    'Allow curing time before removing barriers',
                    'Schedule 1-week follow-up inspection'
                ],
                time: 36,
                success: 91,
                cases: 2
            }
        };

        let selectedComplaint = null;

        function showPage(page) {
            ['landing', 'citizen', 'officer'].forEach(p => {
                document.getElementById(p).classList.add('hidden');
            });
            document.getElementById(page).classList.remove('hidden');

            if (page === 'citizen') loadCitizenComplaints();
            if (page === 'officer') loadOfficerComplaints();
        }

        function toggleForm() {
            document.getElementById('complaintForm').classList.toggle('hidden');
        }

        function submitComplaint(e) {
            e.preventDefault();
            const newComplaint = {
                id: complaints.length + 1,
                complaint_id: `CMP-${Date.now()}-DEMO${String(complaints.length + 1).padStart(4, '0')}`,
                citizen_id: 1,
                title: document.getElementById('title').value,
                description: document.getElementById('description').value,
                category: 'Pending Classification',
                status: 'pending',
                created_at: new Date().toISOString(),
            };

            complaints.push(newComplaint);

            document.getElementById('title').value = '';
            document.getElementById('description').value = '';
            document.getElementById('location').value = '';
            toggleForm();

            alert(`‚úÖ Complaint submitted successfully!\n\nID: ${newComplaint.complaint_id}\n\nAI will classify and assign to an officer automatically.`);

            setTimeout(() => {
                const categories = [
                    { cat: 'Streetlight Not Working', dept: 'Electricity', officer: 'Rajesh Kumar' },
                    { cat: 'Pothole on Road', dept: 'Roads', officer: 'Amit Patel' },
                    { cat: 'Garbage Not Collected', dept: 'Sanitation', officer: 'Priya Sharma' },
                ];
                const random = categories[Math.floor(Math.random() * categories.length)];
                newComplaint.category = random.cat;
                newComplaint.department = random.dept;
                newComplaint.officer = random.officer;
                newComplaint.status = 'assigned';
                loadCitizenComplaints();
            }, 1000);

            loadCitizenComplaints();
        }

        function loadCitizenComplaints() {
            const html = complaints.map(c => `
        <div class="glass-card p-6 hover:scale-[1.02] transition-transform mb-4">
          <div class="flex items-start justify-between mb-3">
            <div class="flex-1">
              <div class="flex items-center gap-3 mb-2">
                <h3 class="text-xl font-bold">${c.title}</h3>
                <span class="px-3 py-1 rounded-full text-xs font-medium ${getStatusBadge(c.status)}">${c.status.toUpperCase()}</span>
              </div>
              <p class="text-white/60 text-sm mb-1">ID: ${c.complaint_id}</p>
            </div>
          </div>
          <p class="text-white/80 mb-4">${c.description}</p>
          <div class="grid grid-cols-3 gap-4 pt-3 border-t border-white/10">
            <div>
              <p class="text-xs text-white/40 mb-1">Category</p>
              <p class="font-medium text-sm">${c.category || 'Classifying...'}</p>
            </div>
            <div>
              <p class="text-xs text-white/40 mb-1">Department</p>
              <p class="font-medium text-sm">${c.department || 'Pending'}</p>
            </div>
            <div>
              <p class="text-xs text-white/40 mb-1">Assigned To</p>
              <p class="font-medium text-sm">${c.officer || 'Routing...'}</p>
            </div>
          </div>
          ${c.resolution ? `
            <div class="mt-4 p-4 bg-green-500/10 border border-green-500/30 rounded-xl">
              <p class="text-xs text-green-400 font-medium mb-1">‚úì RESOLVED</p>
              <p class="text-white/80 text-sm">${c.resolution}</p>
            </div>
          ` : ''}
        </div>
      `).join('');

            document.getElementById('complaintsList').innerHTML = html || '<div class="glass-card p-12 text-center text-white/60">No complaints yet. Submit your first complaint!</div>';
        }

        function loadOfficerComplaints() {
            const assigned = complaints.filter(c => c.status === 'assigned');
            document.getElementById('complaintCount').textContent = assigned.length;

            const html = assigned.map(c => `
        <div onclick="selectComplaint(${c.id})" class="p-4 rounded-xl border cursor-pointer transition-all ${selectedComplaint?.id === c.id
                    ? 'bg-blue-500/20 border-blue-500 shadow-lg shadow-blue-500/20'
                    : 'bg-white/5 border-white/10 hover:bg-white/10'
                }">
          <p class="font-semibold text-sm mb-1 text-white/90">${c.complaint_id}</p>
          <p class="text-white/70 text-sm leading-tight">${c.title}</p>
          <p class="text-xs text-white/50 mt-2">${c.category}</p>
        </div>
      `).join('');

            document.getElementById('officerComplaints').innerHTML = html || '<p class="text-center text-white/40 py-12 text-sm">üéâ No pending complaints!</p>';
        }

        function selectComplaint(id) {
            selectedComplaint = complaints.find(c => c.id === id);
            loadOfficerComplaints();

            const suggestions = mockSuggestions[id] || mockSuggestions[1];

            const html = `
        <div class="space-y-6 text-left">
          <div class="glass-card p-6">
            <div class="flex justify-between items-start mb-4">
              <div>
                <h2 class="text-2xl font-bold mb-2">${selectedComplaint.title}</h2>
                <p class="text-white/60 text-sm">ID: ${selectedComplaint.complaint_id}</p>
              </div>
              <button onclick="resolveComplaint()" class="btn-primary px-6 py-3 rounded-xl font-semibold whitespace-nowrap">‚úì Mark Resolved</button>
            </div>
            <p class="text-white/80 mb-4">${selectedComplaint.description}</p>
            <div class="grid grid-cols-3 gap-4 pt-4 border-t border-white/10">
              <div>
                <p class="text-xs text-white/40 mb-1">Category</p>
                <p class="font-medium text-sm">${selectedComplaint.category}</p>
              </div>
              <div>
                <p class="text-xs text-white/40 mb-1">Department</p>
                <p class="font-medium text-sm">${selectedComplaint.department}</p>
              </div>
              <div>
                <p class="text-xs text-white/40 mb-1">Submitted</p>
                <p class="font-medium text-sm">${new Date(selectedComplaint.created_at).toLocaleDateString()}</p>
              </div>
            </div>
          </div>

          <div class="glass-card p-6 border-2 border-blue-500/30 shadow-2xl shadow-blue-500/10">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center text-2xl shadow-lg shadow-blue-500/50">ü§ñ</div>
              <div>
                <h3 class="text-xl font-bold text-blue-400">AI Resolution Intelligence</h3>
                <p class="text-sm text-white/60">Powered by Neo4j Graph Database ‚Ä¢ ${suggestions.cases} similar cases analyzed</p>
              </div>
            </div>

            <div class="mb-6">
              <h4 class="font-semibold mb-3 text-green-400 flex items-center gap-2">
                <span class="text-lg">‚úì</span> Recommended Action Steps:
              </h4>
              <div class="space-y-2">
                ${suggestions.actions.map((action, i) => `
                  <div class="flex items-start gap-3 p-3 bg-green-500/10 border border-green-500/30 rounded-lg hover:bg-green-500/20 transition-all">
                    <span class="text-green-400 font-bold flex-shrink-0">${i + 1}.</span>
                    <p class="text-white/90 text-sm">${action}</p>
                  </div>
                `).join('')}
              </div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-6 p-4 bg-white/5 border border-white/10 rounded-xl">
              <div class="text-center">
                <p class="text-xs text-white/40 mb-1">Estimated Time</p>
                <p class="font-bold text-2xl text-blue-400">${suggestions.time}h</p>
              </div>
              <div class="text-center">
                <p class="text-xs text-white/40 mb-1">Success Rate</p>
                <p class="font-bold text-2xl text-green-400">${suggestions.success}%</p>
              </div>
              <div class="text-center">
                <p class="text-xs text-white/40 mb-1">Similar Cases</p>
                <p class="font-bold text-2xl text-yellow-400">${suggestions.cases}</p>
              </div>
            </div>

            <div>
              <h4 class="font-semibold mb-3 text-blue-400 flex items-center gap-2">
                <span class="text-lg">üîç</span> Historical Cases with Proven Solutions:
              </h4>
              <div class="space-y-3 max-h-80 overflow-y-auto pr-2">
                ${suggestions.similar_complaints.map(sc => `
                  <div class="p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg hover:border-blue-500/40 transition-all">
                    <div class="flex justify-between items-start mb-2">
                      <p class="font-medium text-sm text-blue-300">${sc.id}</p>
                      <div class="text-right">
                        <span class="text-xs text-green-400 font-semibold">‚úì Resolved in ${sc.time}h</span>
                        <div class="text-xs text-yellow-400 mt-1">${sc.similarity}% similar</div>
                      </div>
                    </div>
                    <p class="text-sm text-white/80 mb-3 font-medium">${sc.title}</p>
                    <div class="p-3 bg-white/5 border border-white/10 rounded-lg">
                      <p class="text-xs text-white/50 mb-1 font-semibold">Successful Resolution:</p>
                      <p class="text-sm text-white/90">${sc.resolution}</p>
                    </div>
                    <div class="mt-2 flex justify-between items-center">
                      <div class="flex gap-1">
                        ${Array(sc.rating).fill('‚≠ê').join('')}
                      </div>
                      <span class="text-xs text-white/40">Officer rating: ${sc.rating}/5</span>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>

            <div class="mt-6 p-4 bg-purple-500/10 border border-purple-500/30 rounded-xl">
              <p class="text-sm text-purple-300">
                <strong>üí° Why this works:</strong> These suggestions are generated from our Resolution Intelligence Network - 
                a graph database that learns from every resolved complaint. The system analyzed ${suggestions.cases} similar cases 
                and identified the most successful resolution patterns.
              </p>
            </div>
          </div>
        </div>
      `;

            document.getElementById('complaintDetails').innerHTML = html;
        }

        function resolveComplaint() {
            const resolution = prompt('Enter resolution details (or press Cancel to use AI suggestion):');
            if (resolution === null) return;

            const finalResolution = resolution || 'Followed AI recommended steps. Issue resolved successfully.';
            selectedComplaint.status = 'resolved';
            selectedComplaint.resolution = finalResolution;

            alert('‚úÖ Complaint marked as resolved!\n\nThis resolution will be added to the graph database to help future officers.');

            selectedComplaint = null;
            loadOfficerComplaints();
            document.getElementById('complaintDetails').innerHTML = '<div class="glass-card p-12 text-center h-full flex items-center justify-center"><div><div class="text-6xl mb-4">üëà</div><p class="text-white/60 text-lg">Select a complaint to view AI suggestions</p></div></div>';
        }

        function getStatusBadge(status) {
            const badges = {
                pending: 'bg-yellow-500/20 text-yellow-400 border border-yellow-500/30',
                assigned: 'bg-blue-500/20 text-blue-400 border border-blue-500/30',
                in_progress: 'bg-purple-500/20 text-purple-400 border border-purple-500/30',
                resolved: 'bg-green-500/20 text-green-400 border border-green-500/30'
            };
            return badges[status] || 'bg-gray-500/20 text-gray-400';
        }

        // Initialize
        loadCitizenComplaints();
    </script>
</body>

</html>